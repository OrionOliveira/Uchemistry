##:kivy
#:import ZBarCam kivy_garden.zbarcam.ZBarCam
#:import ZBarSymbol pyzbar.pyzbar.ZBarSymbol

# https://materialdesignicons.com/ - Lista com todos os ícones disponíveis

<Manager>:
    Menu:
        id: mn
        name: 'menu_screen'
    Scanner:
        id: sc 
        name: 'scanner_screen'
    Products:
        id: prd
        name: 'product_screen'
    SignIn:
        id: sgn
        name: 'signin_screen'
    Login:
        id: lgn
        name: 'login_screen'
    User:
        id: usr
        name: 'user_screen'

<Menu>:
    FloatLayout:
        orientation: 'vertical'
        MDTopAppBar:
            md_bg_color: 0.5,0,0.5,1
            pos_hint: {'top': 1}
            title: 'UChemistry'
            right_action_items: [["account-box", lambda x: root.go_sign()]]
        Image:
            source: 'Images/app_icon.png'
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            size_hint: (0.4, 0.4)
        MDRectangleFlatButton:
            text: 'Scanner'
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            on_release: app.root.current = 'scanner_screen'
            size_hint_x: .6
        MDRectangleFlatButton:
            text: 'Add Products'
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            on_release: root.product_screen()
            size_hint_x: .6

<Scanner>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        MDTopAppBar:
            md_bg_color: 0.5, 0, 0.5, 1
            pos_hint: {'top': 1}
            title: 'UChemistry - Scanner'
            right_action_items:
                [["home", lambda x: app.go_home('scanner_screen')]]
        ZBarCam:
            id: zbarcam
            on_symbols: if self.symbols: root.read_qr(self.symbols[0].data)
            pos_hint: {'center_x': .5, 'center_y': .5}
        MDRaisedButton:
            text: 'Clear'
            pos_hint: {'center_x': 0.8, 'center_y': 0.276}
            size_hint_x: .3
            on_release: root.clear()
        MDCard:
            size_hint: (.9, .2)
            pos_hint: {'center_x': .5, 'center_y': .13}
            elevation: 2
            MDFloatLayout:
                MDLabel:
                    id: qr_name
                    text: ''
                    pos_hint: {'center_x': .5, 'center_y': .7}
                MDLabel:
                    id: qr_contents
                    text: ''
                    pos_hint: {'center_x': .5, 'center_y': .5}
                MDLabel:
                    id: qr_amount
                    text: ''
                    pos_hint: {'center_x': .5, 'center_y': .3}

<Products>:
    FloatLayout:
        MDTopAppBar:
            md_bg_color: 0.5, 0, 0.5, 1
            pos_hint: {'top': 1}
            title: 'Uchemistry - Products'
            right_action_items:
                [["home", lambda x: app.go_home('product_screen')]]
        MDLabel:
            text: 'Products'
            font_size: 50
            pos_hint: {'center_x': 0.7, 'center_y': 0.75}
        MDLabel:
            text: 'Name'
            font_size: 15
            pos_hint: {'center_x': 0.58, 'center_y': 0.55}
        MDTextField:
            id: product_name
            hint_text: 'Enter product name:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint_x: None
            width: 250
        MDLabel:
            text: 'Contents'
            font_size: 15
            pos_hint: {'center_x': 0.58, 'center_y': 0.45}
        MDTextField:
            id: product_value
            hint_text: 'Enter product contents:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            size_hint_x: None
            width: 250
        MDLabel:
            text: 'Amount'
            font_size: 15
            pos_hint: {'center_x': 0.58, 'center_y': 0.35}
        MDTextField:
            id: product_amount
            hint_text: 'Enter product amount:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            size_hint_x: None
            width: 250
        MDRectangleFlatButton:
            text: 'QR Code Generator'
            pos_hint: {'center_x': 0.5, 'center_y': 0.2}
            on_release: root.save_product()

<SignIn>:
    user_name: user_name
    user_email: user_email
    user_password: user_password
    
    FloatLayout:
        MDTopAppBar:
            md_bg_color: 0.5, 0, 0.5, 1
            pos_hint: {'top': 1}
            title: 'Uchemistry - Sign In'
            left_action_items:
                [["arrow-left", lambda x: app.go_home('signin_screen')]]
        Image:
            source: 'Images/app_icon.png'
            pos_hint: {'center_x': 0.5, 'center_y': 0.77}
            size_hint: (0.3, 0.3)
        MDTextField:
            id: user_name
            hint_text: 'Enter your name:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            icon_right: 'account'
            icon_right_color: app.theme_cls.primary_color
            size_hint_x: None
            width: 250
        MDTextField:
            id: user_email
            hint_text: 'Enter your email:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            icon_right: 'email'
            icon_right_color: app.theme_cls.primary_color
            size_hint_x: None
            width: 250
        MDTextField:
            id: user_password
            hint_text: 'Enter your password:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            password: True
            icon_right: 'lock'
            icon_right_color: app.theme_cls.primary_color
            size_hint_x: None
            width: 250
        MDTextField:
            id: repeat_password
            hint_text: 'Repeat your password:'
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            password: True
            icon_right: 'lock'
            icon_right_color: app.theme_cls.primary_color
            size_hint_x: None
            width: 250
        MDRectangleFlatButton:
            text: 'Sign In'
            pos_hint: {'center_x': 0.5, 'center_y': 0.2}
            size_hint_x: .8
            on_release: root.sign_in()
        

<Login>:
    user_name: user_name
    user_email: user_email
    user_password: user_password

    FloatLayout:
        MDTopAppBar:
            id: user_bar
            md_bg_color: 0.5, 0, 0.5, 1
            pos_hint: {'top': 1}
            title: 'Uchemistry - Login'
            left_action_items:
                [["arrow-left", lambda x: app.go_home('login_screen')]]
        Image:
            source: 'Images/app_icon.png'
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}
            size_hint: (0.4, 0.4)
        MDTextField:
            id: user_email
            hint_text: 'Enter your email:'
            helper_text: ''
            helper_text_mode: 'on_error'
            required: False
            icon_right: 'email'
            icon_right_color: app.theme_cls.primary_color
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint_x: None
            width: 250
        MDTextField:
            id: user_password
            hint_text: 'Enter your password:'
            helper_text: ''
            helper_text_mode: 'on_error'
            required: False
            password: True
            icon_right: 'lock'
            icon_right_color: app.theme_cls.primary_color
            pos_hint: {'center_x': 0.5, 'center_y': 0.4}
            size_hint_x: None
            width: 250
        MDRaisedButton:
            text: 'Login'
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            size_hint_x: .8
            on_release: root.login()
        MDTextButton:
            text: "Don't have an account? Sing up"
            text_color: 0, 0, 1, 1
            font_size: 14
            pos_hint: {'center_x': 0.5, 'center_y': 0.22}
            on_press: app.root.current = 'signin_screen'
        Label:
            id: user_name
            text: ''

<User>:
    user_title: user_bar
    user_name: user_title
    user_id: user_id

    FloatLayout:
        MDTopAppBar:
            id: user_bar
            md_bg_color: 0.5, 0, 0.5, 1
            pos_hint: {'top': 1}
            title: 'Uchemistry - user name'
            left_action_items:
                [["arrow-left", lambda x: app.go_home()]]
        Label:
            id: user_title
            text: 'User'
        Label:
            id: user_id
            text: 'User'